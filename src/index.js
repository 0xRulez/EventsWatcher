/* eslint-disable no-multi-spaces */
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------
//  Imports
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------
import { exit } from 'process'
import Utils from './utils.js'
const utils = new Utils()

// ---------------------------------------------------------------------------------------------------------------------------------------------------------------
//  Entry Point
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------
async function starter () {
  try {
    // Welcome message
    utils.welcomeMessage()

    // Open database
    await utils.db.openDatabase()

    // Setup RPC & Contract
    await utils.setupWeb3()

    // Reload all events from blockchain 1-by-1 and compare to DB
    await utils.reloadEventsFromBlockchain()

    // Listen to events
    await utils.eventsListenter()
  }
  catch (e) {
    console.log(e)
    exit(1)
  }
}

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
starter()
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
